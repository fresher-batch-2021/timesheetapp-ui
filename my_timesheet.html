<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Timesheet</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Balsamiq+Sans&display=swap" rel="stylesheet">

    <link rel="icon" href="images/favicon.ico">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header id="header">

    </header>
    <section class="my-timesheet-table">
        <table id="list" class="my-timesheet-class">
            <thead>
                <tr>
                    <th id="my-timesheet-table-head">TaskName</th>
                    <th id="my-timesheet-table-head">timeIn</th>
                    <th id="my-timesheet-table-head">timeOut</th>
                    <th id="my-timesheet-table-head">Total(hours)</th>
                    <th id="my-timesheet-table-head">Comments</th>
                </tr>
            </thead>
            <tbody>
                <!-- <tr>
                    <td>Created index page</td>
                    <td>9:00 </td>
                    <td> 6:00</td>
                    <td>9</td>
                    <td>Nill</td>
                </tr> -->

            </tbody>

        </table>
    </section>
    

   
    <div class="add-task-form">
        <h3 style="color: whitesmoke;">Add Task</h3>
        <form id="list-task">
            <label for="taskName">Enter Task Name</label><br>
            <input type="text" name="taskName" id="taskName" required autofocus>
            <br>
            <label for="timeIn">Enter time in</label><br>
            <input type="time" name="timeIn" id="timeIn" required >
            <br>
            <label for="timeOut">Enter time out</label><br>
            <input type="time" name="timeOut" id="timeOut" required>
            <br>
            <label for="comments">Enter comments</label><br>
            <input type="text" name="comments" id="comments" required>
            <br>

            
            <button class="task-button2" id="button" type="button" name="button" value=" Add " onclick="AddData()">Add</button>
            <button id="display-button" class="task-button3" onclick="">Submit</button>
            <button class="task-button1" id="button" type="button" name="button" value=" Reset " onclick="ResetForm()">Reset</button>

        </form>
    </div>



    <footer id="footer">

    </footer>

    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script>
        $("#header").load("header.html");
        $("#footer").load("footer.html");



        function AddData() {
            var x = document.getElementById("taskName").value;
            var y = document.getElementById("timeIn").value;
            var a = document.getElementById("timeOut").value;
            var b = document.getElementById("comments").value;
            var letters = '/^[a-zA-Z]+$/';
            if ((parseInt(x) != (x)) && (y == parseInt(y)) && (a == parseInt(a)) && (b == parseInt(b))) {
                alert("Wrong Value Entered");
            } else {
                var rows = "";
                var taskName = document.getElementById("taskName").value;
                var timeIn = document.getElementById("timeIn").value;
                var timeOut = document.getElementById("timeOut").value;
                var totalHours = (timeOut - timeIn);
                var comments = document.getElementById("comments").value;
                var taskObj = {
                    inTime: timeIn,
                    outTime: timeOut,
                    totalHours: totalHours,
                    comments: comments,
                    taskName: taskName
                };
                console.log(taskObj);


                let taskStr = localStorage.getItem("TASKS");
                let tasks = taskStr != null ? JSON.parse(taskStr): []; 
                tasks.push(taskObj);


                //store all tasks in localStorage
                localStorage.setItem("TASKS", JSON.stringify(tasks));




                rows += "<tr><td>" + taskName + "</td><td>" + timeIn + "</td><td>" + timeOut + "</td><td>" +
                    totalHours + "</td><td>" + comments + "</td></tr>";
                $(rows).appendTo("#list tbody");
            }

        }

        function displayTasks() {


        }

        

        function ResetForm() {
            document.getElementById("list-task").reset();
        }

    </script>
    <script src="timesheet_record.js">

    </script>
</body>

</html>
